# ZStack AI 智能运维助手 v1.0 Release Notes

## 🎉 首次发布 — 2026年2月19日

ZStack AI 智能运维助手是一款 Chrome 浏览器扩展，通过自然语言对话实现 ZStack 云平台的智能化运维管理。无需后端部署，即装即用。

---

## ✨ 核心功能

### 自然语言运维
- 用中文对话管理云平台，无需记忆 API 路径和参数
- 支持查询、创建、删除、启停、迁移等全生命周期操作
- 智能理解用户意图，自动选择最优 API 调用方式

### 全量资源覆盖
覆盖 ZStack 云平台 50+ 资源类型，包括：
- **计算**：云主机、镜像、计算规格、云盘规格
- **存储**：云盘、快照、备份、主存储、镜像仓库、Ceph
- **网络**：L2/L3 网络、VIP、弹性 IP、端口转发、安全组、IPsec VPN
- **负载均衡**：负载均衡器、监听器、服务器组
- **VPC**：VPC 路由器、路由表、VPC 防火墙
- **基础设施**：区域、集群、物理机、管理节点
- **高级功能**：裸金属、弹性伸缩、CDP 备份、V2V 迁移、监控告警

### ZQL 智能查询
- 自动使用 ZStack Query Language 执行复杂查询
- 精确统计资源总数（`count`），不受分页限制
- 支持条件过滤、排序、关联查询

### 双查询模式
- **⚡ 精简模式**：先统计总数，展示前 20 条 + 概览，适合日常巡检
- **📋 全量模式**：自动翻页获取全部数据，适合资源盘点和导出

### 流式响应
- 实时逐字输出，无需等待完整响应
- 支持停止生成，随时中断长回复
- 思考过程可视化（GLM-5、DeepSeek-R1 等推理模型）

### 多轮工具调用
- 单次对话最多 100 轮工具调用，支持复杂运维场景
- 批量操作自动编排（如"创建 5 台相同配置的云主机"）
- 5 分钟超时保护，防止无限循环

## 🤖 多模型支持

| 厂商 | 模型 | 状态 |
|------|------|------|
| Anthropic | Claude Opus 4 / Sonnet 4 | ✅ 已测试 |
| 智谱 AI | GLM-5 / GLM-4 系列 | ✅ 已测试 |
| OpenAI | GPT-4o / GPT-4o-mini | ✅ 兼容 |
| DeepSeek | DeepSeek-Chat / DeepSeek-R1 | ✅ 兼容 |
| 阿里通义 | Qwen-Plus / Qwen-Max | ✅ 兼容 |
| MiniMax | MiniMax-M2.5 / MiniMax-Text-01 | ✅ 兼容 |

- 支持自定义 API 地址，兼容任何 OpenAI 格式的代理和私有化部署
- 不支持 Tool Calling 的模型（如 deepseek-reasoner、o1）自动跳过工具注入
- 流式请求失败时自动降级为非流式

## 🎨 界面特性

- Markdown 渲染（表格、代码块、列表）
- 代码块一键复制
- 对话历史持久化（浏览器本地存储）
- 会话导出（JSON 格式）
- 首次使用引导配置
- 深色主题 UI，适配侧边栏场景
- 响应式布局，支持窄屏显示

## 🔒 安全设计

- **纯客户端架构**：所有数据在浏览器本地处理，不经过任何第三方服务器
- **密码 SHA-512 哈希**：登录密码在本地哈希后传输，不存储明文
- **Session 自动续期**：会话过期自动重新登录，无需手动干预
- **危险操作提醒**：删除、停机等操作 LLM 会主动提醒确认

## 📦 安装方式

1. 下载本仓库 `extension/` 目录
2. Chrome 打开 `chrome://extensions/`，开启"开发者模式"
3. 点击"加载已解压的扩展程序"，选择 `extension/` 目录
4. 点击扩展图标，在侧边栏完成配置（ZStack 地址 + LLM 配置）

## 🔧 技术架构

```
┌─────────────────────────────────────────┐
│           Chrome Extension              │
│  ┌──────────┐  ┌──────────┐  ┌───────┐ │
│  │ Side Panel│  │ LLM Engine│  │ZStack │ │
│  │   (UI)   │──│(Streaming)│──│Client │ │
│  └──────────┘  └──────────┘  └───────┘ │
│       │              │            │     │
│       ▼              ▼            ▼     │
│   Markdown      OpenAI/       ZStack    │
│   Rendering     Anthropic     REST API  │
│                 Compatible              │
└─────────────────────────────────────────┘
```

- **前端**：原生 JS + CSS，无框架依赖
- **LLM 集成**：OpenAI Chat Completions 兼容格式 + Anthropic Messages API
- **ZStack 集成**：REST API + ZQL
- **渲染**：marked.js + DOMPurify

## 📋 已知限制

- 仅支持 Chrome / Chromium 内核浏览器（Manifest V3）
- LLM 上下文窗口限制可能影响超长对话的准确性
- 全量模式下大量资源（>500）的展示可能较慢
- 部分 ZStack 高级功能（如审计日志、License 管理）暂未覆盖专用工具

## 🗺️ 后续规划

- [ ] 资源拓扑可视化
- [ ] 运维知识库集成
- [ ] 批量运维脚本生成
- [ ] 告警智能分析与根因定位
- [ ] 多语言支持（English）
- [ ] Firefox / Edge 扩展适配

---

**仓库地址**：http://dev.zstack.io:9080/zhaohao.chen/zstack-ai-assistant

**反馈与建议**：请通过 GitLab Issues 提交
